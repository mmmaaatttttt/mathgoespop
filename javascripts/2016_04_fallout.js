$(function(){function t(t){for(var e,n,a=t.slice(),r=a.length-1;r>0;r--)e=Math.floor(Math.random()*(r+1)),n=a[r],a[r]=a[e],a[e]=n;return a}function e(e){g=t(e),$(".game-word").remove(),g.forEach(function(t){w.before($("<span>",{text:t,"class":"game-word"}))}),$("#typed").typed({stringsElement:$("#typed-text"),showCursor:!1,typeSpeed:-100,callback:function(){n(g)}})}function n(t){var e=t[Math.floor(Math.random()*t.length)],n=4;$("#typed").on("click",".game-word",function(t){var r=$(t.target),o=r.text(),s=o.length-c(o,e);n--,$("#typed .guess-count").text("You have "+n+" guess"+(n>1?"es":"")+" remaining."),s===o.length?a("Win",r):0===n?a("Lose",r):r.removeClass("game-word").addClass("game-word-clicked").text(o+" -----> LIKENESS: "+s)})}function a(t,n){$("#typed .game-word").removeClass("game-word").addClass("game-word-clicked"),n.text(n.text()+" -----> You "+t+"!"),"Lose"===t&&n.addClass("red-text"),$("#typed .guess-count").html("<span>Play Again</span>|<span>Main Menu</span>").addClass("end-game"),$("#typed").on("click",".guess-count span",function(n){$("#typed").remove(),$("#typed-text").after($("<div>",{id:"typed"})),"Play Again"===$(n.target).text()?e(3!==f?g:d(12,Math.floor(10*Math.random()+3))):m.slideDown(1e3),s("Win"===t,f)})}function r(){u=localStorage&&localStorage.getItem("counts")?JSON.parse(localStorage.getItem("counts")):{wins:[0,0,0,0],attempts:[0,0,0,0]}}function o(){u={wins:[0,0,0,0],attempts:[0,0,0,0]},localStorage&&localStorage.setItem("counts",JSON.stringify(u)),i()}function s(t,e){u.attempts[e]++,t&&u.wins[e]++,localStorage&&localStorage.setItem("counts",JSON.stringify(u)),i()}function i(){y.each(function(t,e){var n=u.wins[t],a=u.attempts[t],r="successful hack"+(1===n?"":"s"),o="attempt"+(1===a?"":"s");$(e).html("<p>"+n+" "+r+", </p><p>"+a+" "+o+".</p>")})}function c(t,e){if("string"!=typeof t||"string"!=typeof e)return"Both inputs must be strings!";if(e.length!==t.length)return"Strings must have the same length!";for(var n=t.length,a=0;a<t.length;a++)t[a].toLowerCase()===e[a].toLowerCase()&&n--;return n}function l(t){for(var e="",n=0;t>n;n++)e+=String.fromCharCode(Math.floor(26*Math.random()+97));return e}function d(t,e){for(var n=[],a=0;t>a;a++)n.push(l(e));return n}var u,g,f,m=$("#start-area"),p=$("#reset-terminal"),h=$(".col-xs-6 > .btn-terminal"),y=$(".win-summary"),w=($("#terminal-text"),$(".guess-count")),v=[["agent","fence","forth","start","shape","grass","parts","fists","sound","sewer","viral","piled"],["energy","mutter","warned","atrium","second","carved","forced","hungry","depend","heated","mirror","stream"],["varying","cistern","expects","attends","bottles","torches","limited","corners","fortify","despite","session","durable"]];r(),i(),p.on("click",o),h.on("click",function(){f=$(this).data("idx"),m.slideUp(1e3,function(){e(v[f]||d(12,Math.floor(10*Math.random())+3))})})});