$(function(){var t,e=$(".card, #last-card"),n=$("#last-card"),a=($(".card.answer"),$(".answer .card-front"),$(".answer .card-back"),$(".totalVal")),r=$("#handVal"),i=$("#start"),l=$("#preview"),o=$("#play-area"),c=$(".answer-wrapper"),d=$("#playAgain"),u=$("#simulate"),s=$("#reset"),x=$("#rankVal"),f=$("#pulse"),p=$("#runningCount"),h=$("#totalCount"),v=$("#runningPercent"),b=!1;e.on("click",function(){$(this).toggleClass("flipped")});var w=function(t){c.each(function(e){t>e||20===e?c.eq(e).show():c.eq(e).hide()})},m=function(t,e){for(var n=[];n.length<=e;){var a=Math.ceil(Math.random()*t);-1===n.indexOf(a)&&n.push(a)}return n},C=function(e,a){var r=m(e,a);t=r,r.forEach(function(t,e){e===r.length-1?n.find(".card-text").eq(1).text(t):c.eq(e).find(".card-text").text(t)}),x.text(r[0])},g=function(){h.text(parseInt(h.text())+1),t.indexOf(Math.min.apply(null,t))===t.length-1&&p.text(parseInt(p.text())+1),v.text((p.text()/h.text()*100).toFixed(2)+"%")};n.on("click",function(){f.hide(),d.attr("disabled",!1),b||g(),b=!0}),w(3);var k=new ScrubberView;k.min(50).max(300).step(10).value(50),k.thumb.style.background="#5a5e76",k.thumb.style.borderColor="#ACAEBA",k.onValueChanged=function(t){a.text(t)},$("#totalCardSlider").append(k.elt);var y=new ScrubberView;y.min(1).max(20).step(1).value(3),y.thumb.style.background="#5a5e76",y.thumb.style.borderColor="#ACAEBA",y.onValueChanged=function(t){r.text(t)},$("#cardInHandSlider").append(y.elt),i.on("click",function(){l.slideUp(1e3),o.slideDown(1e3),w(y.value()),C(k.value(),y.value())});var A=function(){n.removeClass("flipped"),b=!1,f.show(),d.attr("disabled",!0)};d.on("click",function(){var t=n.find(".card-back .card-text");t.addClass("white-text"),setTimeout(function(){t.removeClass("white-text")},500),A(),C(k.value(),y.value())}),s.on("click",function(){o.slideUp(1e3,function(){A(),h.text("0"),p.text("0"),v.text("0.00%")}),l.slideDown(1e3)}),u.on("click",function(){for(var t=0;100>t;t++)h.text(parseInt(h.text())+1),Math.random()<1/(y.value()+1)&&p.text(parseInt(p.text())+1),v.text((p.text()/h.text()*100).toFixed(2)+"%")})});